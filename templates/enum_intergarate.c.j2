//enumerated intergrate
//metadata.parsed.primitive_id == {{metadata.parsed.primitive_id}}

//mau tu dapsresponseinfo-item -> dapsressponseindicator
const OSEnumItem e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ENUMTAB[] = {
    {% for en in metadata.enum_items %}
    {OSUTF8("{{ en.name | replace('_', '-') }}"), {{en.value}},{{en.name|length}},{{ en.value }}}{% if not loop.last %},{% endif %}

    {% endfor %}
};

/* Encode / Decode */
EXTERN int asn1PE_e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}} (OSCTXT* pctxt, e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}} value){
    int stat =0;
    if(value >= {{metadata.enum_items|length}}) {
       rtxErrAddIntParm (pctxt, value);
       return LOG_RTERR (pctxt, RTERR_INVENUM);
    }

    /*extention bit*/
    stat = rtxEncBit (pctxt, 0);
    if(stat != 0) return LOG_RTERR (pctxt, stat);
    stat = pe_ConsUnsigned (pctxt, value, 0, OSUINTCONST({{metadata.enum_items|length - 1}}));
    if(stat != 0) return LOG_RTERR (pctxt, stat);
    return stat;
}
EXTERN int asn1PD_e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}} (OSCTXT* pctxt, e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}* pvalue){
    int stat = 0;
    OSUINT32 ui;
    OSBOOL extbit = FALSE;
    stat = DEC_BIT(pctxt, &extbit);
    if (stat != 0) return LOG_RTERR (pctxt, stat);

    if(extbit){
        stat = pd_SmallNonNegWholeNumber(pctxt, &ui);
        if(stat != 0) return LOG_RTERR (pctxt, stat);
        *pvalue = ASN_K_EXTENUM;
    }else{
        stat = pd_ConsUnsigned (pctxt, &ui, 0, OSUINTCONST({{metadata.enum_items|length - 1}}));
        if(stat != 0) return LOG_RTERR (pctxt, stat);
    }
    
    return stat;

}

/* Print helpers */
EXTERN void asn1Print_e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}} (const char* name, const e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}* pvalue){
    rtxPrintIndent();
    printf("%s: ", name);
    switch(*pvalue) {
    {% for item in metadata.enum_items %}
        case {{ item.value | int}}:
            printf("{{ item.name | replace('_', '-') }}\n");
            break;
    {% endfor %}
        default:
            printf("??? (%u)\n", *pvalue);
    }
}

/* Convert to stream (pretty print to stream) */
EXTERN int asn1PrtToStrm_e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}} (OSCTXT* pctxt, const char* name, const e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}* pvalue){
    rtPrintToStringIndent(pctxt);
    rtPrintToStream(pctxt, name);
    switch(*pvalue) {
    {% for item in metadata.enum_items %}
        case {{ item.value | int}}:
            rtPrintToStream(pctxt, " = {{ item.name | replace('_', '-') }} \n");
            break;
    {% endfor %}
        default:
            rtPrintToStreamUnsigned(pctxt, " = ???\n", *pvalue);
    }
}

/* Convert to string (write into user buffer) */
EXTERN int asn1PrtToStr_e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}} (const char* name,e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}* pvalue,  char* buffer,OSSIZE bufSize){
    int stat;
    
    if(rtPrintToStringIndent(buffer, bufSize) < 0) return -1;
    if(rtPrintToString(name, buffer, bufSize) < 0) return -1;
    
    switch(*pvalue) {
    {% for item in metadata.enum_items %}
        case {{ item.value | int}}:
            stat = rtPrintToString(" = {{ item.name | replace('_', '-') }} \n", buffer, bufSize);
            break;
    {% endfor %}
        default:
            stat = rtPrintToStringUnsigned(" = ???\n",*pvalue, buffer, bufSize);
    }
    
    if (stat < 0) return -1;
    return 0;   
}

/* Enum <-> String conversion */
EXTERN const OSUTF8CHAR* e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ToString (OSUINT32 value){
    OSINT32 idx = value;
    if (idx >= 0 && idx < e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ENUMTABSIZE) {
        return e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ENUMTAB
        [e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ENUMTAB[idx].transidx].name;
    } else {
        return OSUTF8("_UNKNOWN_");
    }
}
EXTERN int e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ToEnum (OSCTXT* pctxt, const OSUTF8CHAR* value,e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}* pvalue){
    OSSIZE valueLen = rtxUTF8LenBytes(value);
    return e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ToEnum2 (pctxt, value, valueLen, pvalue);
}

EXTERN int e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ToEnum2 (OSCTXT* pctxt, const OSUTF8CHAR* value, OSSIZE valueLen,e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}* pvalue){
    OSINT32 idx = rtxLookupEnum(value, valueLen,
       e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ENUMTAB, 
       e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ENUMTABSIZE);
    if (idx >= 0) {
       *pvalue = (e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}})e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}_ENUMTAB[idx].value;
       return 0;
    } else {
       rtxErrAddStrParm (pctxt, (const char*)value);
       return LOG_RTERR (pctxt, RTERR_INVENUM);
    }
}

EXTERN int asn1Init_e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}} (e2ap_{{parent_name}}_{{metadata.field_name|replace("-","_")}}* pvalue){
    //if (pvalue == 0) return RTERR_NULLPTR;
    //*pvalue = 0;
    return 0;
}