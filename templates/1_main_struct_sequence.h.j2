/************************************************/
/*       SEQUENCE - {{name}}        */
/************************************************/
{% for f in fields %}
    {% if f.primitive_meta.primitive_id == 5 or  f.primitive_meta.primitive_id ==6 %}{# INTEGER #}
typedef UInt{{f.primitive_meta.max|stdbit}} _e2ap_{{name}}_{{f.field}};
    {% endif %}{# end INTEGER #}
    {% if f.primitive_meta.primitive_id == 2 %}{# BIT STRING 2-3-4 primitive #}{# A..B,...#}
typedef struct{
    UInt{{f.primitive_meta.max |stdbit}} numbits;
    UInt8 data[{{ (f.primitive_meta.max +7)//8 }}];
} _e2ap_{{name}}_{{f.field}}_t;//BIT STRING SIZE (A..B,...)
    {% endif %}
    {% if f.primitive_meta.primitive_id == 4 %} {# A..B#}
typedef struct{
    UInt{{f.primitive_meta.max |stdbit}} numbits;
    UInt8 data[{{ (f.primitive_meta.max +7)//8 }}];
}_e2ap_{{name}}_{{f.field}}_t; //BIT STRING SIZE (A..B)
    {% endif %}
    {% if f.primitive_meta.primitive_id == 3 %} {# A#}
typedef struct{
    UInt{{f.primitive_meta.max |stdbit}} numbits;
    UInt8 data[{{ (f.primitive_meta.max +7)//8 }}];
}_e2ap_{{name}}_{{f.field}}_t; //BIT STRING SIZE (N)
    {% endif %}
    {# ENUMERATED primitive #}
    {% if f.primitive_meta.primitive_id == 13 %}
typedef enum{
    {% for enum in f.primitive_meta.enum_items %}    
    E2AP_{{name|camel_to_upper_snake}}_{{enum.name|camel_to_upper_snake}} = {{enum.value}}{% if not loop.last %},{% endif %}
    {% endfor %}

}_e2ap_{{name}}_{{f.field}}_et;

    {% endif %}
    {% if f.primitive_meta.primitive_id == 9 %}{# OCTET STRING primitive #}
typedef struct{
    UInt32 numocts;
    UInt8 data[{{f.primitive_meta.size }}];
}_e2ap_{{name}}_{{f.field}}_t; //OCTET STRING
    {% endif %}
{% if f.primitive_meta.primitive_id == 8 %}{# OCTET STRING SIZE N #}
typedef struct{
    UInt32 numocts;
    UInt8 data[{{f.primitive_meta.size }}];
}_e2ap_{{name}}_{{f.field}}_t; //OCTET STRING
{% endif %}
{% if f.primitive_meta.primitive_id == 10 %}{# Printable String A..B,...  ?#}
typedef const char* _e2ap_{{name}}_{{f.field}}_t;//Printable STRING SIZE (A..B,...) - P  OK
{% endif %} 
{% endfor %}
/* main struct for sequence */
typedef struct{ {#/* main struct for sequence -*/#} 
{# optional bit mask #}
{% set ns = namespace(bitmask_value=0) %}
{% set has_optional = false %}
{% set ns.bitmask_value = 0%}
{% for f in fields %}
    {% if f.presence == "optional" %}
    {% set ns.bitmask_value = ns.bitmask_value + 1 %}
    #define E2AP_{{name|camel_to_upper_snake}}_e2ap_{{f.field_name|camel_to_upper_snake}}_PRESENT 0x{{ '%02X' % (2 ** (ns.bitmask_value -1)) }}
    {% set has_optional = true %}
    {% endif %}
    {# bit mask #}
    {% if has_optional ==true and loop.index0 == fields|length -1 %}
    
    rrc_bitmask_t bitmask; /* BITMASK ^*/
    {% endif %}
{% endfor %}
{# data #}
{% for f in fields %}
    {% if f.primitive_meta.is == False %} {# ko phai primitive #} 
        {% if f.alias == 13%} {# check alias enum #}
    _e2ap_{{f.ie_type}}_et {{f.field}}; //e2ap_{ie_type} {field_name} {# enum #}
        {% endif %}
        {% if f.alias != 13%} {# check not alias #}
    _e2ap_{{f.ie_type}}_t {{f.field}}; //e2ap_{ie_type} {field_name} alias = {{f.alias}}
        {% endif %}{# end check alias #}
    {% else %} {# primitive #} 
        {% if f.primitive_meta.primitive_id == 13 %} {# ENUMERATED #}
    _e2ap_{{name}}_{{f.field}}_et {{f.field}}; //enum {{f.primitive.primitive_name}}
        {% else %}
    _e2ap_{{name}}_{{f.field}}_t {{f.field}}; //{{f.primitive.primitive_name}}
        {% endif %}
    {% endif %}
{% endfor %} 
}_e2ap_{{name|replace('-', '_')}}_t;  //SEQUENCE


